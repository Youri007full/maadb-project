events {}
http {
  server {
    location /sql/ {
      proxy_pass http://sql-analytics-server/;
    }
    location /nosql/ui/ {
      proxy_pass http://mongo-express:8081/;
    }
    location /nosql/ {
      proxy_pass http://nosql-analytics-server/;
    }
  }
}

stream {
  server {
    listen 27017;
    proxy_pass mongo-supervisor;
  }
  upstream mongo-supervisor {
    server 127.0.0.1: 27017;
  }
  server {
    listen 5432;
    proxy_pass postgres;
  }
  upstream postgres {
    server 127.0.0.1: 5432;
  }
}
